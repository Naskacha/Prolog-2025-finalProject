<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prolog автомобили с GIF</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      max-width: 800px;
      margin: 40px auto;
      background: linear-gradient(135deg, #a8edea, #fed6e3);
      color: #222;
      padding: 25px 30px 40px;
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      font-weight: 600;
      color: #333;
      margin-bottom: 1rem;
      letter-spacing: 1.2px;
      text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
    }

    textarea {
      width: 100%;
      min-height: 140px;
      font-family: 'Courier New', Courier, monospace;
      font-size: 16px;
      padding: 15px 20px;
      border-radius: 12px;
      border: 2px solid #4a90e2;
      box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
      resize: vertical;
      background-color: #fefefe;
      color: #222;
      outline: none;
    }

    textarea:focus {
      border-color: #357abd;
      box-shadow: 0 6px 20px rgba(53, 122, 189, 0.6);
    }

    button {
      display: block;
      margin: 25px auto 0;
      padding: 14px 36px;
      font-size: 20px;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(45deg, #4a90e2, #357abd);
      border: none;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(53, 122, 189, 0.6);
      transition: 0.4s ease;
    }

    button:hover {
      background: linear-gradient(45deg, #357abd, #285a8d);
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.98);
    }

    #result {
      margin-top: 30px;
      font-size: 18px;
      font-weight: 600;
      color: #1a3c6e;
      text-align: center;
      opacity: 0;
      animation: fadeIn 0.8s forwards;
    }

    .animal-container {
      margin-top: 30px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      opacity: 0;
      animation: fadeIn 1s forwards;
    }

    .animal-gif {
      max-width: 180px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(53, 122, 189, 0.5);
      animation: popIn 0.6s forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    @keyframes popIn {
      0% {
        opacity: 0;
        transform: scale(0.6);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>
<body>

  <h1>Prolog автомобили с GIF</h1>

  <textarea id="prolog-input">
% Примери на заявки:
is_suv(X).
is_luxury(X).
is_sports_car(X).
is_electric(X).
is_classic(X).
is_truck(X).
  </textarea>
  <button onclick="runProlog()">Изпълни</button>

  <div id="result"></div>
  <div class="animal-container" id="animal-animation"></div>

  <script src="https://unpkg.com/tau-prolog"></script>
  <script>
    const session = pl.create();

    const knowledge = `
car(toyota). car(bmw). car(ferrari). car(tesla). car(jeep). car(volkswagen).
car(ford). car(chevrolet). car(cadillac). car(honda). car(mercedes). car(porsche).
car(dodge). car(landrover). car(camaro). car(fiat). car(oldsmobile). car(riviera).
car(ford_truck). car(ram). car(volvo_truck). car(nissan_leaf). car(bmw_i3).
car(ford_mustang_mach_e).

suv(jeep). suv(landrover). suv(toyota). suv(volkswagen).
luxury(bmw). luxury(tesla). luxury(cadillac). luxury(mercedes). luxury(porsche). luxury(riviera).
sports_car(ferrari). sports_car(bmw). sports_car(porsche). sports_car(camaro). sports_car(dodge).
electric(tesla). electric(nissan_leaf). electric(bmw_i3). electric(ford_mustang_mach_e).
classic(oldsmobile). classic(fiat). classic(riviera).
truck(ford_truck). truck(ram). truck(volvo_truck).

is_suv(X) :- suv(X).
is_luxury(X) :- luxury(X).
is_sports_car(X) :- sports_car(X).
is_electric(X) :- electric(X).
is_classic(X) :- classic(X).
is_truck(X) :- truck(X).
`;

    session.consult(knowledge);

    const animalAnimations = {
      toyota: 'https://media.giphy.com/media/QbEgxvVUQizk6/giphy.gif',
      bmw: 'https://media.giphy.com/media/kG0HfwOjQk1FK/giphy.gif',
      ferrari: 'https://media.giphy.com/media/c7g8b8UvuzLeA/giphy.gif',
      tesla: 'https://media.giphy.com/media/VbnUQpnihPSIgIXuZv/giphy.gif',
      jeep: 'https://media.giphy.com/media/3oEjHP8ELRNNlnlLGM/giphy.gif',
      volkswagen: 'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
      ford: 'https://media.giphy.com/media/l0MYB8Ory7Hqefo9a/giphy.gif',
      chevrolet: 'https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif',
      cadillac: 'https://media.giphy.com/media/5xk0vdH6Ue7Vu/giphy.gif',
      honda: 'https://media.giphy.com/media/26BRzozg4TCBXv6QU/giphy.gif',
      mercedes: 'https://media.giphy.com/media/l0MYR22WswSQeHTmo/giphy.gif',
      porsche: 'https://media.giphy.com/media/xUOxf48DpuN0DDKKXm/giphy.gif',
      dodge: 'https://media.giphy.com/media/3o7aD9JbUeyQtjMQcE/giphy.gif',
      landrover: 'https://media.giphy.com/media/l3vR6HFSuGNNikVfy/giphy.gif',
      camaro: 'https://media.giphy.com/media/l0MYt5QXxApRoMG7S/giphy.gif',
      fiat: 'https://media.giphy.com/media/l0MYt5V6GlvYh8E2Q/giphy.gif',
      oldsmobile: 'https://media.giphy.com/media/l0MYt5Y9iWguIfWqU/giphy.gif',
      riviera: 'https://media.giphy.com/media/l0MYt5gHCVZbWNVdK/giphy.gif',
      ford_truck: 'https://media.giphy.com/media/3ohs4hx33pMjZwKjRS/giphy.gif',
      ram: 'https://media.giphy.com/media/3o7aD1RW9Wn5NOXyRK/giphy.gif',
      volvo_truck: 'https://media.giphy.com/media/3o7aDbZoxOyThxnyqo/giphy.gif',
      nissan_leaf: 'https://media.giphy.com/media/l0MYFCsxv1iyVRAk4/giphy.gif',
      bmw_i3: 'https://media.giphy.com/media/l0MYJEFaO4zW0FVyU/giphy.gif',
      ford_mustang_mach_e: 'https://media.giphy.com/media/l0MYEKMwYSPYxv4KI/giphy.gif'
    };

    function runProlog() {
      const input = document.getElementById("prolog-input").value.trim();
      const resultDiv = document.getElementById("result");
      const animDiv = document.getElementById("animal-animation");

      resultDiv.innerHTML = "";
      animDiv.innerHTML = "";
      resultDiv.style.opacity = 0;
      animDiv.style.opacity = 0;

      if (!input) {
        resultDiv.innerHTML = "<p>Моля, въведете заявка.</p>";
        resultDiv.style.opacity = 1;
        return;
      }

      session.query(input);
      let answers = [];

      session.answers(answer => {
        if (answer === false) {
          if (answers.length === 0) {
            resultDiv.innerHTML = "<p>Няма резултати за тази заявка.</p>";
          } else {
            resultDiv.innerHTML = answers.join("");
            let gifs = "";
            answers.forEach(str => {
              const match = str.match(/X = (\w+)/);
              if (match) {
                const car = match[1];
                if (animalAnimations[car]) {
                  gifs += `<img src="${animalAnimations[car]}" class="animal-gif" alt="${car}" />`;
                }
              }
            });
            animDiv.innerHTML = gifs || "<p>Няма GIF за тези автомобили.</p>";
          }

          resultDiv.style.opacity = 1;
          animDiv.style.opacity = 1;
          return;
        }

        const str = pl.format_answer(answer);
        if (str !== "false.") {
          answers.push(`<p>${str}</p>`);
        }
      });
    }
  </script>

</body>
</html>
